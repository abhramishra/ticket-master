{"ast":null,"code":"var _jsxFileName = \"/Users/abhramishra/ticket-master/client/src/components/tickets/List.js\";\nimport React from 'react';\nimport axios from '../../config/axios';\nimport { Link } from 'react-router-dom';\n\nclass TicketList extends React.Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      console.log('COUNT', this.state.count);\n\n      if (e.target.checked) {\n        const progressBar = 100 / this.state.count;\n        console.log(progressBar);\n        this.setState(prevState => ({\n          progressBar,\n          count: prevState.count - 1\n        }));\n      } else {\n        if (this.state.count == 0) {\n          const progressBar = 0;\n          this.setState(prevState => ({\n            progressBar,\n            count: prevState.count + 1\n          }));\n        } else {\n          const progressBar = 100 / this.state.count;\n          alert(progressBar);\n          this.setState(prevState => ({\n            progressBar,\n            count: prevState.count + 1\n          }));\n        }\n\n        console.log('COUNT', this.state.count);\n      }\n    };\n\n    this.state = {\n      tickets: [],\n      employees: [],\n      departments: [],\n      customers: [],\n      progressBar: 0,\n      count: 0\n    };\n  }\n\n  componentDidMount() {\n    // to get all the ticktes\n    axios.get('/tickets', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(response => {\n      const ticket = response.data; //  console.log(ticket)\n\n      this.setState(prevState => ({\n        tickets: prevState.tickets.concat(ticket),\n        count: ticket.length\n      }));\n    }).catch(err => {\n      alert(err);\n    }); // to get all the employee\n\n    axios.get('/employees', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(response => {\n      const employees = response.data; //  console.log(employees)\n\n      this.setState({\n        employees\n      });\n    }).catch(err => {\n      alert(err);\n    }); // to get all the departments\n\n    axios.get('/departments', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(response => {\n      const departments = response.data;\n      console.log(departments);\n      this.setState({\n        departments\n      });\n    }).catch(err => {\n      alert(err);\n    }); // to get all the customers\n\n    axios.get('/customers', {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(response => {\n      const customers = response.data;\n      console.log(customers);\n      this.setState({\n        customers\n      });\n    }).catch(err => {\n      alert(err);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Tickets - \", this.state.tickets.length, \" \"), React.createElement(\"table\", {\n      border: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Code no\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"customer\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Department\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Employee\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Message\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Priority\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Show\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Remove\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Complete\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, this.state.tickets.map(ticket => {\n      return React.createElement(\"tr\", {\n        key: ticket._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, ticket.code), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.state.customers.length && this.state.customers.find(customer => customer._id == ticket.customer).name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, this.state.departments.length && this.state.departments.find(department => department._id == ticket.department).name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"pending\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, ticket.message), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, ticket.priority), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Show\")), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Remove\")), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"checkbox\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })));\n    }))), React.createElement(\"div\", {\n      className: \"progress\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"progress-bar\",\n      style: {\n        width: `${this.state.progressBar}%`\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    })), React.createElement(Link, {\n      to: \"/ticket/new\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Add Ticket\"));\n  }\n\n}\n\nexport default TicketList;","map":{"version":3,"sources":["/Users/abhramishra/ticket-master/client/src/components/tickets/List.js"],"names":["React","axios","Link","TicketList","Component","constructor","handleChange","e","console","log","state","count","target","checked","progressBar","setState","prevState","alert","tickets","employees","departments","customers","componentDidMount","get","headers","localStorage","getItem","then","response","ticket","data","concat","length","catch","err","render","map","_id","code","find","customer","name","department","message","priority","width"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAEA,MAAMC,UAAN,SAAyBH,KAAK,CAACI,SAA/B,CAAyC;AACrCC,EAAAA,WAAW,GAAG;AACV;;AADU,SA2EdC,YA3Ec,GA2EEC,CAAD,IAAO;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,KAAKC,KAAL,CAAWC,KAAhC;;AACA,UAAIJ,CAAC,CAACK,MAAF,CAASC,OAAb,EAAsB;AAClB,cAAMC,WAAW,GAAI,MAAM,KAAKJ,KAAL,CAAWC,KAAtC;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAYK,WAAZ;AACA,aAAKC,QAAL,CAAcC,SAAS,KAAK;AACxBF,UAAAA,WADwB;AAExBH,UAAAA,KAAK,EAAEK,SAAS,CAACL,KAAV,GAAkB;AAFD,SAAL,CAAvB;AAIH,OAPD,MAOO;AAEH,YAAI,KAAKD,KAAL,CAAWC,KAAX,IAAoB,CAAxB,EAA2B;AACvB,gBAAMG,WAAW,GAAG,CAApB;AACA,eAAKC,QAAL,CAAcC,SAAS,KAAK;AACxBF,YAAAA,WADwB;AAExBH,YAAAA,KAAK,EAAEK,SAAS,CAACL,KAAV,GAAkB;AAFD,WAAL,CAAvB;AAIH,SAND,MAMO;AACH,gBAAMG,WAAW,GAAG,MAAM,KAAKJ,KAAL,CAAWC,KAArC;AACAM,UAAAA,KAAK,CAACH,WAAD,CAAL;AACA,eAAKC,QAAL,CAAcC,SAAS,KAAK;AACxBF,YAAAA,WADwB;AAExBH,YAAAA,KAAK,EAAEK,SAAS,CAACL,KAAV,GAAkB;AAFD,WAAL,CAAvB;AAIH;;AACDH,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,KAAKC,KAAL,CAAWC,KAAhC;AAEH;AACR,KAvGa;;AAEV,SAAKD,KAAL,GAAa;AACTQ,MAAAA,OAAO,EAAE,EADA;AAETC,MAAAA,SAAS,EAAE,EAFF;AAGTC,MAAAA,WAAW,EAAE,EAHJ;AAITC,MAAAA,SAAS,EAAE,EAJF;AAKTP,MAAAA,WAAW,EAAE,CALJ;AAMTH,MAAAA,KAAK,EAAE;AANE,KAAb;AAQH;;AACDW,EAAAA,iBAAiB,GAAG;AAChB;AACArB,IAAAA,KAAK,CAACsB,GAAN,CAAU,UAAV,EAAqB;AACjBC,MAAAA,OAAO,EAAE;AACL,kBAAUC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADL;AADQ,KAArB,EAKEC,IALF,CAKQC,QAAD,IAAc;AAChB,YAAMC,MAAM,GAAGD,QAAQ,CAACE,IAAxB,CADgB,CAEjB;;AACC,WAAKf,QAAL,CAAcC,SAAS,KAAK;AACxBE,QAAAA,OAAO,EAAEF,SAAS,CAACE,OAAV,CAAkBa,MAAlB,CAAyBF,MAAzB,CADe;AAExBlB,QAAAA,KAAK,EAAEkB,MAAM,CAACG;AAFU,OAAL,CAAvB;AAIH,KAZF,EAaEC,KAbF,CAaSC,GAAD,IAAS;AACZjB,MAAAA,KAAK,CAACiB,GAAD,CAAL;AACH,KAfF,EAFgB,CAkBhB;;AACAjC,IAAAA,KAAK,CAACsB,GAAN,CAAU,YAAV,EAAuB;AACnBC,MAAAA,OAAO,EAAE;AACL,kBAAUC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADL;AADU,KAAvB,EAKEC,IALF,CAKQC,QAAD,IAAc;AAChB,YAAMT,SAAS,GAAIS,QAAQ,CAACE,IAA5B,CADgB,CAEjB;;AACC,WAAKf,QAAL,CAAc;AAACI,QAAAA;AAAD,OAAd;AACH,KATF,EAUEc,KAVF,CAUSC,GAAD,IAAS;AACZjB,MAAAA,KAAK,CAACiB,GAAD,CAAL;AACH,KAZF,EAnBgB,CAiChB;;AACAjC,IAAAA,KAAK,CAACsB,GAAN,CAAU,cAAV,EAAyB;AACrBC,MAAAA,OAAO,EAAE;AACL,kBAAUC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADL;AADY,KAAzB,EAKEC,IALF,CAKQC,QAAD,IAAc;AAChB,YAAMR,WAAW,GAAIQ,QAAQ,CAACE,IAA9B;AACAtB,MAAAA,OAAO,CAACC,GAAR,CAAYW,WAAZ;AACA,WAAKL,QAAL,CAAc;AAACK,QAAAA;AAAD,OAAd;AACH,KATF,EAUEa,KAVF,CAUSC,GAAD,IAAS;AACZjB,MAAAA,KAAK,CAACiB,GAAD,CAAL;AACH,KAZF,EAlCgB,CA+ChB;;AACAjC,IAAAA,KAAK,CAACsB,GAAN,CAAU,YAAV,EAAuB;AACnBC,MAAAA,OAAO,EAAE;AACL,kBAAUC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADL;AADU,KAAvB,EAKEC,IALF,CAKQC,QAAD,IAAc;AAChB,YAAMP,SAAS,GAAIO,QAAQ,CAACE,IAA5B;AACAtB,MAAAA,OAAO,CAACC,GAAR,CAAYY,SAAZ;AACA,WAAKN,QAAL,CAAc;AAACM,QAAAA;AAAD,OAAd;AACH,KATF,EAUEY,KAVF,CAUSC,GAAD,IAAS;AACZjB,MAAAA,KAAK,CAACiB,GAAD,CAAL;AACH,KAZF;AAcH;;AAgCDC,EAAAA,MAAM,GAAG;AACL,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAgB,KAAKzB,KAAL,CAAWQ,OAAX,CAAmBc,MAAnC,MADJ,EAEI;AAAO,MAAA,MAAM,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARJ,EASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATJ,CADJ,CADJ,EAcI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ,KAAKtB,KAAL,CAAWQ,OAAX,CAAmBkB,GAAnB,CAAuBP,MAAM,IAAI;AAC7B,aACI;AAAI,QAAA,GAAG,EAAEA,MAAM,CAACQ,GAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAMR,MAAM,CAACS,IAAb,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAM,KAAK5B,KAAL,CAAWW,SAAX,CAAqBW,MAArB,IAA+B,KAAKtB,KAAL,CAAWW,SAAX,CAAqBkB,IAArB,CAA0BC,QAAQ,IAAIA,QAAQ,CAACH,GAAT,IAAgBR,MAAM,CAACW,QAA7D,EAAuEC,IAA5G,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAM,KAAK/B,KAAL,CAAWU,WAAX,CAAuBY,MAAvB,IAAiC,KAAKtB,KAAL,CAAWU,WAAX,CAAuBmB,IAAvB,CAA4BG,UAAU,IAAIA,UAAU,CAACL,GAAX,IAAkBR,MAAM,CAACa,UAAnE,EAA+ED,IAAtH,CAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAMZ,MAAM,CAACc,OAAb,CALJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAMd,MAAM,CAACe,QAAb,CANJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAJ,CAPJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAJ,CARJ,EASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,QAAQ,EAAE,KAAKtC,YAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CATJ,CADJ;AAaH,KAdD,CAFR,CAdJ,CAFJ,EAoCI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,cAAf;AAA8B,MAAA,KAAK,EAAE;AAACuC,QAAAA,KAAK,EAAG,GAAE,KAAKnC,KAAL,CAAWI,WAAY;AAAlC,OAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CApCJ,EAuCI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,aAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAvCJ,CADJ;AA2CH;;AAtJoC;;AAyJzC,eAAeX,UAAf","sourcesContent":["import React from 'react'\nimport axios from '../../config/axios'\nimport { Link } from 'react-router-dom'\n\nclass TicketList extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            tickets: [],\n            employees: [],\n            departments: [],\n            customers: [],\n            progressBar: 0,\n            count: 0\n        }\n    }\n    componentDidMount() {\n        // to get all the ticktes\n        axios.get('/tickets',{\n            headers: {\n                'x-auth': localStorage.getItem('authToken')\n            }\n        })\n         .then((response) => {\n             const ticket = response.data\n            //  console.log(ticket)\n             this.setState(prevState => ({\n                 tickets: prevState.tickets.concat(ticket),\n                 count: ticket.length\n             }))            \n         })\n         .catch((err) => {\n             alert(err)\n         })\n        // to get all the employee\n        axios.get('/employees',{\n            headers: {\n                'x-auth': localStorage.getItem('authToken')\n            }\n        })\n         .then((response) => {\n             const employees =  response.data\n            //  console.log(employees)\n             this.setState({employees})\n         })\n         .catch((err) => {\n             alert(err)\n         })\n\n        // to get all the departments\n        axios.get('/departments',{\n            headers: {\n                'x-auth': localStorage.getItem('authToken')\n            }\n        })\n         .then((response) => {\n             const departments =  response.data\n             console.log(departments)\n             this.setState({departments})\n         })\n         .catch((err) => {\n             alert(err)\n         })\n        // to get all the customers\n        axios.get('/customers',{\n            headers: {\n                'x-auth': localStorage.getItem('authToken')\n            }\n        })\n         .then((response) => {\n             const customers =  response.data\n             console.log(customers)\n             this.setState({customers})\n         })\n         .catch((err) => {\n             alert(err)\n         })\n\n    }\n\n    handleChange = (e) => {\n            console.log('COUNT', this.state.count)\n            if (e.target.checked) {\n                const progressBar = (100 / this.state.count)\n                console.log(progressBar)\n                this.setState(prevState => ({\n                    progressBar,\n                    count: prevState.count - 1\n                }))\n            } else {\n\n                if (this.state.count == 0 ){\n                    const progressBar = 0\n                    this.setState(prevState => ({\n                        progressBar,\n                        count: prevState.count + 1\n                    }))\n                } else {\n                    const progressBar = 100 / this.state.count\n                    alert(progressBar)\n                    this.setState(prevState => ({\n                        progressBar,\n                        count: prevState.count + 1\n                    }))\n                }\n                console.log('COUNT', this.state.count)\n\n            }\n    }\n\n    render() {\n        return (\n            <div>\n                <h1>Tickets - { this.state.tickets.length } </h1>\n                <table border=\"1\">\n                    <thead>\n                        <tr>\n                            <th>Code no</th>\n                            <th>customer</th>\n                            <th>Department</th>\n                            <th>Employee</th>\n                            <th>Message</th>\n                            <th>Priority</th>\n                            <th>Show</th>\n                            <th>Remove</th>\n                            <th>Complete</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            this.state.tickets.map(ticket => {\n                                return (\n                                    <tr key={ticket._id}>\n                                        <td>{ ticket.code }</td>\n                                        <td>{ this.state.customers.length && this.state.customers.find(customer => customer._id == ticket.customer).name }</td>\n                                        <td>{ this.state.departments.length && this.state.departments.find(department => department._id == ticket.department).name }</td>\n                                        <td>pending</td>\n                                        <td>{ ticket.message }</td>\n                                        <td>{ ticket.priority }</td>\n                                        <td><button>Show</button></td>\n                                        <td><button>Remove</button></td>\n                                        <td><input type=\"checkbox\" onChange={this.handleChange}/></td>\n                                    </tr>\n                                )\n                            })\n                        }\n                    </tbody>\n                </table>\n                <div className=\"progress\">\n                    <div className=\"progress-bar\" style={{width: `${this.state.progressBar}%`}}></div>\n                </div>\n                <Link to=\"/ticket/new\">Add Ticket</Link>\n            </div>\n        )\n    }\n}\n\nexport default TicketList"]},"metadata":{},"sourceType":"module"}