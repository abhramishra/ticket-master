(this.webpackJsonpticketmaster=this.webpackJsonpticketmaster||[]).push([[0],{109:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(23),c=a.n(r),o=a(11),m=a(22),s=a(122),i=a(123),u=a(124),h=a(52),d=a.n(h);var p=function(e){return l.a.createElement("div",{className:"container"},l.a.createElement("img",{src:d.a,style:{width:"100%"}}))},E=a(3),b=a(5),f=a(6),g=a(7),v=a(8),y=a(9),k=a(53),O=a.n(k).a.create({baseURL:"/"}),S=a(110),j=a(111),C=a(112),w=a(113),T=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).handleChange=function(t){e.setState(Object(E.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};O.post("/users/login",a).then((function(t){if(t.data.hasOwnProperty("error"))window.alert(t.data.error);else{var a=t.headers["x-auth"];localStorage.setItem("authToken",a),e.props.history.push("/"),window.location.reload()}}))},e.state={email:"",password:""},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Login"),l.a.createElement(S.a,{onSubmit:this.handleSubmit},l.a.createElement(j.a,{htmlFor:"email"},"email"),l.a.createElement(C.a,{type:"text",placeholder:"Enter your email id",id:"email",name:"email",value:this.state.email,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement(j.a,{htmlFor:"password"},"password"),l.a.createElement(C.a,{type:"password",placeholder:"Enter your password",id:"password",name:"password",value:this.state.password,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement(w.a,null,"Login")))}}]),t}(l.a.Component),x=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).handleChange=function(t){e.setState(Object(E.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={username:e.state.username,email:e.state.email,password:e.state.password};console.log(a),O.post("/users/",a).then((function(t){t.data.hasOwnProperty("errors")?alert(t.data.message):(alert("Successfully Registered"),e.props.history.push("/users/login"))})).catch((function(e){alert(e)}))},e.state={username:"",email:"",password:""},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Sign up"),l.a.createElement(S.a,{onSubmit:this.handleSubmit},l.a.createElement(j.a,{htmlFor:"username"},"Username"),l.a.createElement(C.a,{type:"text",id:"username",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Enter the username"})," ",l.a.createElement("br",null),l.a.createElement(j.a,{htmlFor:"email"},"Email"),l.a.createElement(C.a,{type:"text",id:"email",name:"email",value:this.state.email,onChange:this.handleChange,placeholder:"Enter your email"})," ",l.a.createElement("br",null),l.a.createElement(j.a,{htmlFor:"password"},"Password"),l.a.createElement(C.a,{type:"password",id:"password",name:"password",value:this.state.password,onChange:this.handleChange,placeholder:"create a password"})," ",l.a.createElement("br",null),l.a.createElement(w.a,null,"Register with us")))}}]),t}(l.a.Component),D=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.confirm("Are you sure?")&&O.delete("/users/logout",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){t.data;localStorage.removeItem("authToken"),e.props.history.push("/"),window.location.reload()})).catch((function(e){alert(e)}))}},{key:"render",value:function(){return l.a.createElement("div",null)}}]),t}(l.a.Component),N=a(114),_=a(19),I=a.n(_),M=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).handleRemove=function(t){window.confirm("Are you sure ?")&&O.delete("/customers/".concat(t),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){a.data.isCustomerAttached?alert("This customer has assigned to some other ticket, you can not delete"):e.setState((function(e){return{customers:e.customers.filter((function(e){return e._id!=t}))}}))})).catch((function(e){alert(e)}))},e.state={customers:[]},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/customers",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({customers:a})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Listing Customers - ",this.state.customers.length),this.state.customers.length>0?l.a.createElement("div",null,l.a.createElement(N.a,{striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Mobile"),l.a.createElement("th",null,"Actions"),l.a.createElement("th",null,"Remove"))),l.a.createElement("tbody",null,this.state.customers.map((function(t){return l.a.createElement("tr",{key:t._id},l.a.createElement("td",null,t._id),l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.email),l.a.createElement("td",null,t.mobile),l.a.createElement("td",null,l.a.createElement(o.b,{to:"/customers/".concat(t._id)},l.a.createElement(w.a,{color:"info"},"Show"))),l.a.createElement("td",null,l.a.createElement(w.a,{color:"danger",onClick:function(){e.handleRemove(t._id)}},"Remove")))}))))):l.a.createElement("div",null,l.a.createElement("p",null,"No employee added")),l.a.createElement(o.b,{to:"/customers/new"},l.a.createElement(w.a,{color:"secondary"},"Add Customer")))}}]),t}(l.a.Component),A=a(115),R=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmitData=function(e){e.preventDefault();var t={name:a.state.name,email:a.state.email,mobile:a.state.mobile};a.props.handleSubmit(t)},a.state={name:e.customer?e.customer.name:"",email:e.customer?e.customer.email:"",mobile:e.customer?e.customer.mobile:""},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement(S.a,{onSubmit:this.handleSubmitData},l.a.createElement(A.a,null,l.a.createElement(j.a,{htmlFor:"name"},"Name"),l.a.createElement(C.a,{type:"text",id:"name",name:"name",onChange:this.handleChange,value:this.state.name,placeholder:"enter your name"})),l.a.createElement(A.a,null,l.a.createElement(j.a,{htmlFor:"email"},"Email"),l.a.createElement(C.a,{type:"text",id:"email",name:"email",onChange:this.handleChange,value:this.state.email,placeholder:"enter your email"})),l.a.createElement(A.a,null,l.a.createElement(j.a,{htmlFor:"mobile"},"Mobile"),l.a.createElement(C.a,{type:"text",id:"mobile",name:"mobile",onChange:this.handleChange,value:this.state.mobile,placeholder:"enter your mobile number"})),l.a.createElement(w.a,{color:"secondary"},"Submit"),l.a.createElement(o.b,{to:"/customers"}," ",l.a.createElement(w.a,{color:"secondary"},"Back"))))}}]),t}(l.a.Component),F=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(l)))).handleSubmit=function(e){O.post("/customers",e,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){e.data.hasOwnProperty("errors")?alert(e.data.message):a.props.history.push("/customers")}))},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"New Customer"),l.a.createElement(R,{handleSubmit:this.handleSubmit}))}}]),t}(l.a.Component),P=a(116),L=a(117),B=a(118),H=a(119),W=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).state={customer:{},customerTickets:[]},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;O.get("/customers/".concat(t),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({customer:a})})).catch((function(e){alert(e)})),O.get("/tickets",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){var n=a.data.filter((function(e){return e.customer._id==t}));e.setState({customerTickets:n})}))}},{key:"render",value:function(){return I()(this.state.customer)?l.a.createElement("div",{className:"container"},l.a.createElement("p",null,"loading...")):l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,this.state.customer.name," - ",this.state.customer.email),l.a.createElement(o.b,{to:"/customers/edit/".concat(this.state.customer._id)},l.a.createElement(w.a,null,"Edit")),l.a.createElement("br",null),l.a.createElement("br",null),this.state.customerTickets.length?l.a.createElement("div",{className:"row"},this.state.customerTickets.map((function(e){return l.a.createElement("div",{className:"col-md-6 text-center"},l.a.createElement(P.a,null,l.a.createElement(L.a,null,l.a.createElement(B.a,null,"Code - ",e.code),l.a.createElement(H.a,null,"customer - ",e.customer.name),l.a.createElement(H.a,null,"Department - ",e.department.name),l.a.createElement(H.a,null,"Employees - ",e.employees.map((function(e){return l.a.createElement("span",{key:e._id},e.name,", ")}))),l.a.createElement(H.a,null,"Message - ",e.message),l.a.createElement(H.a,null,"Priority - ",e.priorities),l.a.createElement(o.b,{to:"/tickets/".concat(e._id)},l.a.createElement(w.a,null,"Show Ticket")))))}))):l.a.createElement("p",null,"No ticket issued by ",this.state.customer.name))}}]),t}(l.a.Component),J=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).handleSubmit=function(t){O.put("/customers/".concat(e.props.match.params.id),t,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){e.props.history.push("/customers/".concat(e.props.match.params.id))})).catch((function(e){alert(e)}))},e.state={customer:{}},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;O.get("/customers/".concat(t),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({customer:a})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Customer Edit"),!I()(this.state.customer)&&l.a.createElement(R,{handleSubmit:this.handleSubmit,customer:this.state.customer}))}}]),t}(l.a.Component),U=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmitData=function(e){e.preventDefault();var t={name:a.state.name};a.props.handleSubmit(t)},a.state={name:e.department?e.department.name:""},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement(S.a,{onSubmit:this.handleSubmitData},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h2",null,l.a.createElement("label",{htmlFor:"name"},"Add Department")),l.a.createElement("br",null),l.a.createElement("input",{type:"text",id:"name",name:"name",onChange:this.handleChange,value:this.state.name}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(w.a,{color:"secondary"},"Submit")))}}]),t}(l.a.Component),q=a(120),z=a(121),G=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).handleSubmit=function(t){O.post("/departments",t,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState((function(e){return{departments:e.departments.concat(a)}}))})).catch((function(e){alert(e)}))},e.handleRemove=function(t){window.confirm("Are you sure ?")&&O.delete("/departments/".concat(t),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){a.data.isDepartmentAttachedToTkt?alert("This department is attached to some other ticket, you can not delete"):a.data.isDepartmentAttachedToEmp?alert("This department is attached to some other employee"):e.setState((function(e){return{departments:e.departments.filter((function(e){return e._id!=t}))}}))})).catch((function(e){alert(e)}))},e.state={departments:[]},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/departments",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({departments:a})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Department - ",this.state.departments.length),l.a.createElement(q.a,null,this.state.departments.map((function(t){return l.a.createElement(z.a,{key:t._id},t.name,l.a.createElement("div",{className:"float-right"},l.a.createElement(o.b,{to:"/departments/".concat(t._id)},l.a.createElement(w.a,{color:"info"},"Show")),l.a.createElement(w.a,{color:"danger",onClick:function(){e.handleRemove(t._id)}},"remove")))}))),l.a.createElement(U,{handleSubmit:this.handleSubmit}))}}]),t}(l.a.Component),K=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).state={department:{},deptWiseTicket:[]},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;O.get("/departments/".concat(t),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({department:a})})).catch((function(e){e.response?401==e.response.status&&alert(e.response.data.message):alert("Internal server error")})),O.get("/tickets",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){var n=a.data.filter((function(e){return e.department._id==t}));e.setState({deptWiseTicket:n})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Department - ",this.state.department.name),l.a.createElement(o.b,{to:"/departments/edit/".concat(this.props.match.params.id)},"Edit"),this.state.deptWiseTicket.length?l.a.createElement("div",{className:"row"},this.state.deptWiseTicket.map((function(e){return l.a.createElement("div",{className:"col-md-6 text-center"},l.a.createElement(P.a,null,l.a.createElement(L.a,null,l.a.createElement(H.a,null,"Code - ",e.code),l.a.createElement(H.a,null,"Customer - ",e.customer.name),l.a.createElement(H.a,null,"Department - ",e.department.name),l.a.createElement(H.a,null,"Employees - ",e.employees.map((function(e){return l.a.createElement("span",{key:e._id},e.name,", ")}))),l.a.createElement(H.a,null,"Message - ",e.message),l.a.createElement(H.a,null,"Priority - ",e.priorities),l.a.createElement(o.b,{to:"/tickets/".concat(e._id)},l.a.createElement(w.a,null,"Show Ticket")))))}))):l.a.createElement("p",null,"No ticket issued by ",this.state.department.name," department"))}}]),t}(l.a.Component),Q=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).handleSubmit=function(t){O.put("/departments/".concat(e.props.match.params.id),t,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){e.props.history.push("/departments/".concat(e.props.match.params.id))})).catch((function(e){alert(e)}))},e.state={department:{}},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/departments/".concat(this.props.match.params.id),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({department:a})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Department Edit"),!I()(this.state.department)&&l.a.createElement(U,{handleSubmit:this.handleSubmit,department:this.state.department}))}}]),t}(l.a.Component),V=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).handleRemove=function(t){window.confirm("Are yoy sure ?")&&O.delete("/employees/".concat(t),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){if(a.data.isEmployeeAttachedToTkt)alert("This employee is attached to some other ticket, you need to delete that ticket first");else{var n=e.state.employees.filter((function(e){return e._id!=t}));e.setState({employees:n})}})).catch((function(e){alert(e)}))},e.state={employees:[]},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/employees",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({employees:a})}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Employees - ",this.state.employees.length),this.state.employees.length>0?l.a.createElement("div",null,l.a.createElement(N.a,{striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Mobile"),l.a.createElement("th",null,"Department"),l.a.createElement("th",null,"Actions"),l.a.createElement("th",null,"Remove"))),l.a.createElement("tbody",null,this.state.employees.map((function(t){return l.a.createElement("tr",{key:t._id},l.a.createElement("td",null,t._id),l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.email),l.a.createElement("td",null,t.mobile),l.a.createElement("td",null,t.department.name),l.a.createElement("td",null,l.a.createElement(o.b,{to:"/employees/".concat(t._id)},l.a.createElement(w.a,{color:"info"},"Show"))),l.a.createElement("td",null,l.a.createElement(w.a,{color:"danger",onClick:function(){e.handleRemove(t._id)}},"Remove")))}))))):l.a.createElement("div",null,l.a.createElement("p",null,"No employee added")),l.a.createElement("center",null,l.a.createElement(o.b,{to:"/employees/new"},l.a.createElement(w.a,{color:"secondary"},"Add new Employee"))))}}]),t}(l.a.Component),X=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmitData=function(e){e.preventDefault();var t={name:a.state.name,email:a.state.email,mobile:a.state.mobile,department:a.state.department};console.log(t),a.props.handleSubmit(t)},a.state={name:e.employee?e.employee.name:"",email:e.employee?e.employee.email:"",mobile:e.employee?e.employee.mobile:"",department:e.employee?e.employee.department:"",departments:[]},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/departments",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({departments:a})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Add new employee"),l.a.createElement(S.a,{onSubmit:this.handleSubmitData},l.a.createElement(j.a,{htmlFor:"name"},"Name"),l.a.createElement("br",null),l.a.createElement(C.a,{type:"text",id:"name",name:"name",value:this.state.name,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement(j.a,{htmlFor:"name"},"Email"),l.a.createElement("br",null),l.a.createElement(C.a,{type:"text",id:"Email",name:"email",value:this.state.email,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement(j.a,{htmlFor:"name"},"Mobile"),l.a.createElement("br",null),l.a.createElement(C.a,{type:"text",id:"Mobile",name:"mobile",value:this.state.mobile,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement(j.a,{htmlFor:"department"},"Department"),l.a.createElement("br",null),l.a.createElement(C.a,{type:"select",id:"department",name:"department",value:this.state.department,onChange:this.handleChange},l.a.createElement("option",null,"select department"),this.state.departments.map((function(e){return l.a.createElement("option",{key:e._id,value:e._id},e.name)}))),l.a.createElement("br",null),l.a.createElement(w.a,null,"Submit"),l.a.createElement(o.b,{to:"/employees"}," ",l.a.createElement(w.a,null,"Back"))))}}]),t}(l.a.Component),Y=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(l)))).handleSubmit=function(e){O.post("/employees",e,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){console.log(e.data),e.data.errors?alert(e.data.message):a.props.history.push("/employees")})).catch((function(e){alert(e)}))},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement(X,{handleSubmit:this.handleSubmit}))}}]),t}(l.a.Component),Z=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).state={employee:{}},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/employees/".concat(this.props.match.params.id),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({employee:a})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,this.state.employee.name," - ",this.state.employee.email),l.a.createElement(o.b,{to:"/employees/edit/".concat(this.props.match.params.id)},"Edit"))}}]),t}(l.a.Component),$=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).state={employee:{}},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/employees/".concat(this.props.match.params.id),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({employee:a})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Employee Edit"),!I()(this.state.employee)&&l.a.createElement(X,{handleSubmit:this.handleSubmit,employee:this.state.employee}))}}]),t}(l.a.Component),ee=a(30),te=a.n(ee),ae=a(56),ne=a.n(ae),le=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).setupPieData=function(){var t=e.state.tickets.filter((function(e){return"high"==e.priorities})),a=e.state.tickets.filter((function(e){return"medium"==e.priorities})),n=e.state.tickets.filter((function(e){return"low"==e.priorities})),l=[{name:"High",y:t.length},{name:"Medium",y:a.length},{name:"Low",y:n.length}];e.setState({pieChartOptions:l})},e.handleChange=function(e){},e.handleRemove=function(t){window.confirm("Are you sure ?")&&O.delete("/tickets/".concat(t),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(a){var n=e.state.tickets.filter((function(e){return e._id!=t}));e.setState({tickets:n}),e.setupPieData()})).catch((function(e){alert(e)}))},e.state={tickets:[],pieChartOptions:[],progressBar:0,count:0},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/tickets",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;console.log(a),e.setState((function(e){return{tickets:e.tickets.concat(a),count:a.length}})),e.setupPieData()})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this,t={chart:{type:"pie"},title:{text:"My Chart"},series:[{data:this.state.pieChartOptions}]};return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Tickets - ",this.state.tickets.length," "),l.a.createElement(N.a,{striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Code no"),l.a.createElement("th",null,"customer"),l.a.createElement("th",null,"Department"),l.a.createElement("th",null,"Employee"),l.a.createElement("th",null,"Message"),l.a.createElement("th",null,"Priority"),l.a.createElement("th",null,"Show"),l.a.createElement("th",null,"Remove"),l.a.createElement("th",null,"Complete"))),l.a.createElement("tbody",null,this.state.tickets.map((function(t){return l.a.createElement("tr",{key:t._id},l.a.createElement("td",null,t.code),l.a.createElement("td",null,t.customer.name),l.a.createElement("td",null,t.department.name),l.a.createElement("td",null,t.employees.map((function(e){return l.a.createElement("li",{key:e._id},e.name)}))),l.a.createElement("td",null,t.message),l.a.createElement("td",null,t.priorities),l.a.createElement("td",null,l.a.createElement(o.b,{to:"/tickets/".concat(t._id)},l.a.createElement(w.a,{color:"info"},"Show"))),l.a.createElement("td",null,l.a.createElement(w.a,{color:"danger",onClick:function(){e.handleRemove(t._id)}},"Remove")),l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",onChange:function(){e.handleChange(t._id)}})))})))),l.a.createElement("div",{className:"progress"},l.a.createElement("div",{className:"progress-bar",style:{width:"".concat(this.state.progressBar,"%")}})),l.a.createElement(o.b,{to:"/tickets/new"},l.a.createElement(w.a,{color:"secondary"},"Add Ticket")),l.a.createElement("div",null,l.a.createElement(ne.a,{highcharts:te.a,options:t})))}}]),t}(l.a.Component),re=a(27),ce=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState(Object(E.a)({},e.target.name,t))},a.handleCustomer=function(e){var t=e.value;a.setState({customer:t})},a.handleEmployee=function(e){var t=e.map((function(e){return e.value}));a.setState({employee:t})},a.handleDepartment=function(e){var t=e.value,n=a.state.employees.filter((function(e){return e.department._id==t}));a.setState({selectedEmployee:n,department:t})},a.handleSubmitData=function(e){e.preventDefault();var t={code:a.state.code,customer:a.state.customer,department:a.state.department,employees:a.state.employee,message:a.state.message,priorities:a.state.priority};a.props.handleSubmit(t)},a.state={code:e.ticket?e.ticket.code:"",customer:e.ticket?e.ticket.customer:"",department:e.ticket?e.ticket.department:"",employee:e.ticket?e.ticket.employees:[],message:e.ticket?e.ticket.message:"",priority:e.ticket?e.ticket.priorities:"",customers:[],departments:[],employees:[],selectedEmployee:[]},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/departments",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({departments:a})})).catch((function(e){alert(e)})),O.get("/customers",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({customers:a})})).catch((function(e){alert(e)})),O.get("/employees",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({employees:a})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=[],t=[],a=[];return this.state.customers.forEach((function(t){var a={value:t._id,label:t.name};e.push(a)})),this.state.departments.forEach((function(e){t.push({value:e._id,label:e.name})})),this.state.selectedEmployee.forEach((function(e){a.push({value:e._id,label:e.name})})),l.a.createElement("div",{className:"container"},l.a.createElement(S.a,{onSubmit:this.handleSubmitData},l.a.createElement(j.a,null,"Code"),l.a.createElement("br",null),l.a.createElement(C.a,{type:"text",value:this.state.code,name:"code",onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement(j.a,null,"Customer"),l.a.createElement("br",null),l.a.createElement(re.a,{options:e,onChange:this.handleCustomer,name:"customer",disabled:"true"}),l.a.createElement(j.a,null,"Department"),l.a.createElement(re.a,{options:t,onChange:this.handleDepartment,id:"dept"}),l.a.createElement(j.a,null,"Employee"),l.a.createElement(re.a,{options:a,isMulti:!0,onChange:this.handleEmployee}),l.a.createElement(j.a,null,"Mesage"),l.a.createElement("br",null),l.a.createElement(C.a,{type:"textarea",row:"10",cols:"100",onChange:this.handleChange,name:"message",value:this.state.message}),l.a.createElement("br",null),l.a.createElement(A.a,{tag:"fieldset"},l.a.createElement("legend",null,"Priority"),l.a.createElement(A.a,{check:!0},l.a.createElement(j.a,{check:!0},l.a.createElement(C.a,{type:"radio",name:"priority",value:"high",onChange:this.handleChange})," ","High")),l.a.createElement(A.a,{check:!0},l.a.createElement(j.a,{check:!0},l.a.createElement(C.a,{type:"radio",name:"priority",value:"medium",onChange:this.handleChange})," ","Medium")),l.a.createElement(A.a,{check:!0,disabled:!0},l.a.createElement(j.a,{check:!0},l.a.createElement(C.a,{type:"radio",name:"priority",value:"low",onChange:this.handleChange})," ","Low"))),l.a.createElement(w.a,null,"Submit"),l.a.createElement(o.b,{to:"/tickets"}," ",l.a.createElement(w.a,null,"Back"))))}}]),t}(l.a.Component),oe=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(l)))).handleSubmit=function(e){O.post("/tickets",e,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){200==e.status?a.props.history.push("/tickets"):alert("Error",e.data.message)})).catch((function(e){alert(e)}))},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Add Ticket"),l.a.createElement(ce,{handleSubmit:this.handleSubmit}))}}]),t}(l.a.Component),me=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).state={ticket:{}},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;O.get("/tickets/".concat(t),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({ticket:a})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this.state.ticket;return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Ticket"),Object.values(this.state.ticket).length?l.a.createElement("div",null,l.a.createElement(P.a,null,l.a.createElement(L.a,null,l.a.createElement(H.a,null,"Code - ",e.code),l.a.createElement(H.a,null,"Customer - ",e.customer.name),l.a.createElement(H.a,null,"Department - ",e.department.name),l.a.createElement(H.a,null,"Employees - ",e.employees.map((function(e){return l.a.createElement("span",{key:e._id},e.name,", ")}))),l.a.createElement(H.a,null,"Message - ",e.message),l.a.createElement(H.a,null,"Priority - ",e.priorities))),l.a.createElement("br",null),l.a.createElement(o.b,{to:"/tickets/edit/".concat(e._id)},l.a.createElement(w.a,null,"Edit")," "),l.a.createElement(o.b,{to:"/tickets"}," ",l.a.createElement(w.a,null,"Back"))):l.a.createElement("div",null,l.a.createElement("p",null,"Loading .......")))}}]),t}(l.a.Component),se=function(e){function t(){var e;return Object(b.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).handleSubmit=function(e){},e.state={ticket:{}},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get("/tickets/".concat(this.props.match.params.id),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){var a=t.data;e.setState({ticket:a})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Edit"),!I()(this.state.ticket)&&l.a.createElement(ce,{handleSubmit:this.handleSubmit,ticket:this.state.ticket}))}}]),t}(l.a.Component);var ie=function(e){return l.a.createElement(o.a,null,l.a.createElement("div",null,l.a.createElement("div",{className:"row bg-light"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("h1",{style:{color:"gray"}},"Ticket Master")),l.a.createElement("div",{className:"col-md-9 text-right"},localStorage.getItem("authToken")?l.a.createElement(s.a,{className:"float-right"},l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/"},"Home"))),l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/users/account"},"Account"))),l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/customers"},"Customers"))),l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/departments"},"Departments"))),l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/employees"},"Employees"))),l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/tickets"},"Tickets"))),l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/users/logout"},"Logout")))):l.a.createElement(s.a,{className:"float-right"},l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/"},"Home"))),l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/users/login"},"Login"))),l.a.createElement(i.a,null,l.a.createElement(u.a,null,l.a.createElement(o.b,{to:"/users/register"},"Register")))))),l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/",component:p,exact:!0}),l.a.createElement(m.a,{path:"/users/login",component:T}),l.a.createElement(m.a,{path:"/users/register",component:x}),l.a.createElement(m.a,{path:"/users/logout",component:D}),l.a.createElement(m.a,{path:"/customers",component:M,exact:!0}),l.a.createElement(m.a,{path:"/customers/new",component:F}),l.a.createElement(m.a,{path:"/customers/edit/:id",component:J}),l.a.createElement(m.a,{path:"/customers/:id",component:W}),l.a.createElement(m.a,{path:"/departments",component:G,exact:!0}),l.a.createElement(m.a,{path:"/departments/edit/:id",component:Q}),l.a.createElement(m.a,{path:"/departments/:id",component:K}),l.a.createElement(m.a,{path:"/employees",component:V,exact:!0}),l.a.createElement(m.a,{path:"/employees/new",component:Y}),l.a.createElement(m.a,{path:"/employees/edit/:id",component:$}),l.a.createElement(m.a,{path:"/employees/:id",component:Z}),l.a.createElement(m.a,{path:"/tickets",component:le,exact:!0}),l.a.createElement(m.a,{path:"/tickets/new",component:oe}),l.a.createElement(m.a,{path:"/tickets/edit/:id",component:se}),l.a.createElement(m.a,{path:"/tickets/:id",component:me}))))};a(108);c.a.render(l.a.createElement(ie,null),document.getElementById("root"))},52:function(e,t,a){e.exports=a.p+"static/media/help-desk-tickets.09afc165.webp"},57:function(e,t,a){e.exports=a(109)}},[[57,1,2]]]);
//# sourceMappingURL=main.b257401b.chunk.js.map